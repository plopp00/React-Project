{"ast":null,"code":"import _slicedToArray from \"D:\\\\SkolaReact\\\\react-project\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"D:\\\\SkolaReact\\\\react-project\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"D:\\\\SkolaReact\\\\react-project\\\\front-end\\\\src\\\\Components\\\\Main\\\\Store.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport io from 'socket.io-client';\nimport axios from 'axios';\nimport { getToken } from \"../AuthHelper\";\nexport const CTX = React.createContext();\nconst initState = {\n  general: [{\n    from: 'Kalle',\n    msg: 'Hallå!!'\n  }],\n  topic2: [{\n    from: 'Stefan',\n    msg: 'Hej!!'\n  }]\n};\n\nconst getUserName = () => {\n  return axios({\n    url: 'http://localhost:3010/getname',\n    method: 'get'\n  }).then(res => {\n    // handle success\n    console.log(res);\n    return res;\n  }).catch(function (error) {\n    // handle error\n    console.log(error);\n  });\n};\n\nfunction reducer(state, action) {\n  const _action$payload = action.payload,\n        from = _action$payload.from,\n        msg = _action$payload.msg,\n        topic = _action$payload.topic;\n\n  switch (action.type) {\n    case 'RECIEVE_MESSAGE':\n      return _objectSpread({}, state, {\n        [topic]: [...state[topic], {\n          from,\n          msg\n        }]\n      });\n\n    default:\n      return state;\n  }\n}\n\nlet socket;\n\nfunction sendChatAction(value) {\n  socket.emit('chat message', value);\n}\n\nexport default function Store(props) {\n  const _useState = useState(''),\n        _useState2 = _slicedToArray(_useState, 2),\n        count = _useState2[0],\n        setCount = _useState2[1];\n\n  axios({\n    url: 'http://localhost:3010/getname',\n    method: 'get'\n  }).then(res => {\n    // handle success\n    console.log(res.data);\n    setCount(res.data);\n  }).catch(function (error) {\n    // handle error\n    console.log(error);\n  });\n  console.log({\n    count\n  });\n\n  const _React$useReducer = React.useReducer(reducer, initState),\n        _React$useReducer2 = _slicedToArray(_React$useReducer, 2),\n        allChats = _React$useReducer2[0],\n        dispatch = _React$useReducer2[1];\n\n  if (!socket) {\n    socket = io(':3001');\n    socket.on('chat message', function (msg) {\n      dispatch({\n        type: 'RECIEVE_MESSAGE',\n        payload: msg\n      });\n    });\n  }\n\n  ;\n  const user1 = {\n    count\n  };\n  const user = user1.count;\n  console.log(toString(user));\n  return React.createElement(CTX.Provider, {\n    value: {\n      allChats,\n      sendChatAction,\n      user1\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, props.children);\n}","map":{"version":3,"sources":["D:\\SkolaReact\\react-project\\front-end\\src\\Components\\Main\\Store.js"],"names":["React","useState","useEffect","io","axios","getToken","CTX","createContext","initState","general","from","msg","topic2","getUserName","url","method","then","res","console","log","catch","error","reducer","state","action","payload","topic","type","socket","sendChatAction","value","emit","Store","props","count","setCount","data","useReducer","allChats","dispatch","on","user1","user","toString","children"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport io from 'socket.io-client'\r\nimport axios from 'axios'\r\nimport {getToken} from \"../AuthHelper\";\r\n\r\nexport const CTX = React.createContext();\r\n\r\nconst initState = {\r\n    general: [\r\n        {from: 'Kalle', msg: 'Hallå!!'},\r\n    ],\r\n    topic2: [\r\n        {from: 'Stefan', msg: 'Hej!!'},\r\n    ]\r\n}\r\n\r\n\r\nconst getUserName =  () =>\r\n{\r\n      return axios({\r\n          url: 'http://localhost:3010/getname',\r\n          method: 'get',\r\n\r\n\r\n    })\r\n        .then(res => {\r\n            // handle success\r\n            console.log(res)\r\n            return res\r\n})\r\n        .catch(function (error) {\r\n            // handle error\r\n            console.log(error);\r\n        })\r\n\r\n}\r\n\r\n\r\nfunction reducer(state, action){\r\n    const {from, msg, topic} = action.payload;\r\n    switch(action.type) {\r\n        case 'RECIEVE_MESSAGE':\r\n            return{\r\n                ...state,\r\n                [topic]: [\r\n                    ...state[topic],\r\n                    {from,msg}\r\n                ]\r\n             }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nlet socket;\r\n\r\nfunction sendChatAction(value){\r\n    socket.emit('chat message', value);\r\n}\r\n\r\nexport default function Store(props) {\r\n    const [count, setCount] = useState('');\r\n\r\n        axios({\r\n            url: 'http://localhost:3010/getname',\r\n            method: 'get',\r\n\r\n\r\n        })\r\n            .then(res => {\r\n                // handle success\r\n                console.log(res.data)\r\n                setCount(res.data)\r\n\r\n            })\r\n            .catch(function (error) {\r\n                // handle error\r\n                console.log(error);\r\n            })\r\n\r\n\r\n    console.log({count})\r\n    const [allChats, dispatch] = React.useReducer(reducer, initState)\r\n    if (!socket) {\r\n        socket = io(':3001');\r\n        socket.on('chat message', function (msg) {\r\n            dispatch({type: 'RECIEVE_MESSAGE', payload: msg});\r\n        })};\r\n\r\n\r\n\r\nconst user1 = {count}\r\nconst user = user1.count\r\nconsole.log(toString(user))\r\n         return (\r\n             <CTX.Provider value={{allChats, sendChatAction, user1}}>\r\n                 {props.children}\r\n             </CTX.Provider>\r\n         )\r\n\r\n\r\n\r\n\r\n\r\n}"]},"metadata":{},"sourceType":"module"}